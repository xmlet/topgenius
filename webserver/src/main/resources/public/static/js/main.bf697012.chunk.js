(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{8:function(t,e,a){t.exports=a(9)},9:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(2),c=a(4),l=a(3),s=a(5),i=a(0),u=a.n(i),o=a(6),m=a.n(o),h=a(7),f=a.n(h),k=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).state={country:"",limit:1e4},a}return Object(s.a)(e,t),Object(r.a)(e,[{key:"updateCountry",value:function(t){this.setState({country:t.target.value,limit:this.state.limit})}},{key:"updateLimit",value:function(t){this.setState({country:this.state.country,limit:t.target.value})}},{key:"getArtistTracks",value:function(){this.props.handler(this.state.country,this.state.limit)}},{key:"render",value:function(){var t=this;return u.a.createElement("div",{class:"form-group"},u.a.createElement("label",{class:"col-form-label"},"Country:"),u.a.createElement("input",{value:this.state.country,onChange:function(e){return t.updateCountry(e)},class:"form-control",type:"text",name:"country",id:"inputCountry"}),u.a.createElement("label",{class:"col-form-label"},"Number of tracks:"),u.a.createElement("input",{value:this.state.limit,onChange:function(e){return t.updateLimit(e)},class:"form-control",type:"text",name:"limit",id:"inputLimit"}),u.a.createElement("button",{value:"tracks",onClick:function(){return t.getArtistTracks()}},"Top Tracks"))}}]),e}(u.a.Component),p=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).state={tracks:[],fetching:!1},a}return Object(s.a)(e,t),Object(r.a)(e,[{key:"tracksHandler",value:function(t,e){this.setState({tracks:[],fetching:!0}),this.geographicTopTracks(t,e,1)}},{key:"geographicTopTracks",value:function(t,e,a){var n=this;a=a||1,fetch(this.lastfmUrl(t,a,50)).then(function(t){return t.json()}).then(function(t){if(!t.tracks)throw Error("No tracks for given country!");return t.tracks.track}).then(function(r){return n.updateState(r,t,e,a)}).catch(function(t){n.setState({tracks:n.state.tracks,fetching:!1}),alert(t.message)})}},{key:"updateState",value:function(t,e,a,n){if(0!==t.length){var r=a-this.state.tracks.length,c=!0;t.length>r&&(t=t.slice(0,r),c=!1);var l=this.state.tracks.concat(t);this.setState({tracks:l,fetching:c}),c&&this.geographicTopTracks(e,a,n+1)}}},{key:"lastfmUrl",value:function(t,e,a){return"".concat("http://ws.audioscrobbler.com/2.0/","?method=geo.gettoptracks&country=").concat(t,"&page=").concat(e,"&limit=").concat(a,"&format=json&api_key=").concat("038cde478fb0eff567330587e8e981a4")}},{key:"render",value:function(){var t=this;return u.a.createElement("div",null,u.a.createElement("div",{class:"jumbotron"},u.a.createElement("p",{class:"lead"},"TopGenius.eu"),u.a.createElement("hr",null),u.a.createElement(k,{label:"Artist name: ",handler:function(e,a){return t.tracksHandler(e,a)}}),u.a.createElement("div",null,this.state.fetching&&u.a.createElement(f.a,{type:"bars",color:"#666666"}))),u.a.createElement("br",null),u.a.createElement("table",{class:"table"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Rank"),u.a.createElement("th",null,"Name"),u.a.createElement("th",null,"Listeners"))),u.a.createElement("tbody",null,this.state.tracks.map(function(t,e){return u.a.createElement("tr",{key:e},u.a.createElement("td",null,e+1),u.a.createElement("td",null,u.a.createElement("a",{href:t.url,target:"_blank"},t.name)),u.a.createElement("td",null,t.listeners))}))))}}]),e}(u.a.Component);m.a.render(u.a.createElement(p,null),document.getElementById("root"))}},[[8,1,2]]]);
//# sourceMappingURL=main.bf697012.chunk.js.map